<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mascot Integration Catalog</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; background: #f9f9f9; }
  header { display: flex; align-items: center; margin-bottom: 20px; }
  header img { height: 60px; margin-right: 15px; }
  h1 { margin: 0; }
  #searchInput { width: 100%; padding: 8px; margin-bottom: 20px; font-size: 1em; border-radius: 6px; border: 1px solid #ccc; }
  .category { margin-bottom: 20px; background: #fff; border-radius: 8px; padding: 10px 15px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
  .category h2 { cursor: pointer; margin: 0; padding: 10px 0; font-size: 1.2em; }
  .formats { margin-left: 15px; display: none; }
  .format { margin-bottom: 8px; padding: 5px 0; }
  .format a { color: #007bff; text-decoration: none; }
  .format a:hover { text-decoration: underline; }
  .badge { display: inline-block; padding: 3px 8px; margin-right: 5px; border-radius: 12px; font-size: 0.85em; color: #fff; }
  .SFTP { background-color: #ff6b6b; }
  .FTP { background-color: #ffa94d; }
  .HTTP { background-color: #339af0; }
  .EMAIL { background-color: #51cf66; }
  #requestButton { display: inline-block; margin-top: 30px; padding: 12px 20px; background: #339af0; color: #fff; border-radius: 6px; text-decoration: none; font-size: 1em; }
  #requestButton:hover { background: #1c7ed6; }
</style>
</head>
<body>

<header>
  <img src="mascot-logo.png" alt="Mascot Logo">
  <h1>Mascot Integration Catalog</h1>
</header>

<input type="text" id="searchInput" placeholder="Search formats...">

<div id="catalog"></div>

<a id="requestButton" href="contact.html">Request Integration</a>

<script>
let catalogData = {};

// Load catalog.json
fetch('catalog.json')
  .then(res => res.json())
  .then(data => {
    catalogData = data;
    renderCatalog(data);
  });

// Render collapsible catalog
function renderCatalog(data) {
  const container = document.getElementById('catalog');
  data.categories.forEach(cat => {
    const catDiv = document.createElement('div');
    catDiv.className = 'category';

    const catTitle = document.createElement('h2');
    catTitle.textContent = cat.name;

    const formatsDiv = document.createElement('div');
    formatsDiv.className = 'formats';

    catTitle.addEventListener('click', () => {
      formatsDiv.style.display = formatsDiv.style.display === 'none' ? 'block' : 'none';
    });

    cat.formats.forEach(fmt => {
      const fmtDiv = document.createElement('div');
      fmtDiv.className = 'format';
      fmtDiv.innerHTML = `<strong>${fmt.name}</strong> - <a href="${fmt.docUrl}" target="_blank">${fmt.docUrl}</a>`;
      fmt.connections.forEach(conn => {
        const badge = document.createElement('span');
        badge.className = `badge ${conn}`;
        badge.textContent = conn;
        fmtDiv.appendChild(badge);
      });
      formatsDiv.appendChild(fmtDiv);
    });

    catDiv.appendChild(catTitle);
    catDiv.appendChild(formatsDiv);
    container.appendChild(catDiv);
  });
}

// Search functionality
document.getElementById('searchInput').addEventListener('input', (e) => {
  const term = e.target.value.toLowerCase();
  document.querySelectorAll('.format').forEach(f => {
    f.style.display = f.textContent.toLowerCase().includes(term) ? 'block' : 'none';
  });
});
</script>

</body>
</html>
